<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>
    <link rel="stylesheet" href="./src/public/css/home_page.css">
    <link rel="stylesheet" href="./src/public/css/login_page.css">
    <link rel="stylesheet" href="./src/public/css/myAccount_page.css">
    <link rel="stylesheet" href="./src/public/css/product_detail_page.css">
    <link rel="stylesheet" href="./src/public/css/seller_signup_page.css">
    <link rel="stylesheet" href="./src/public/css/cart_page.css">
</head>
<body>
    <div id="main_cart">
        <div id="header_cart">
            <div class="header_cart-links">
                <a href="/">trang chủ</a>
                <a href="#">giỏ hàng của tôi</a>
                <a href="#">kênh người bán</a>
            </div>
            <div class="header_cart-user">
                <div class="header_cart-user-support">
                    <i class="fa-solid fa-question"></i>
                    <p>Hỗ Trợ</p>
                </div>
                <div class="header_cart-user-account">
                    <div class="header_cart-user-account-wrapper">
                        <img class="header_cart-user-account-user_avatar" src="https://cf.shopee.vn/file/91f4e46ce92c28b31efcbb6c39d0172a_tn" alt="">
                        <span>Thắng Hoàng</span>
                    </div>
                    <div class="header_cart-user-account-option">
                        <a href="#">Tài khoản của tôi</a>
                        <a href="#">Đăng xuất</a>
                    </div>
                </div>
            </div>
        </div>
        <div id="content_cart">
            <div class="content_cart-control">
                <div class="content_cart-control-wrapper">
                    <div class="content_cart-product_info">
                        <input class = "select_checkbox select_all" type="checkbox" >
                        <span>Sản phẩm</span>
                    </div>
                    <div class="content_cart-control-item">
                        <span>Đơn giá</span>
                    </div>
                    <div class="content_cart-control-item">
                        <span>Số lượng</span>
                    </div>
                    <div class="content_cart-control-item">
                        <span>Số tiền</span>
                    </div>
                    <div class="content_cart-control-item">
                        <span>Thao tác</span>
                    </div>
                </div>
            </div>
            <!-- ---------------------------------------------- each product --------------------------------- -->
            <div class="content_cart-product">
                <div class="content_cart-product-item">
                    <div class="content_cart-product-item-wrapper">
                        <div class="content_cart-product_info">
                            <input type="checkbox" class="select_checkbox">
                            <a href="#" class="content_cart-product-item-wrapper-link">
                                <img class="content_cart-product-item-avatar" src="https://cf.shopee.vn/file/304c272486a52241d21fd3bbb33eff15" alt="">
                                <p class="content_cart-product-item-introduction">
                                    Tai nghe bluetooth TWS 3 âm thanh vòm, cảm biến , đổi tên , sạc không dây (bh lỗi 1 đổi 1)0000000000000000000000000000000000000
                                </p>
                            </a>
                        </div>
                        <div class="content_cart-control-item content_cart-control-item-price">
                            <span>250000</span> <p>đ</p>
                        </div>
                        <div class="content_cart-control-item">
                            <div class="content_cart-control-item-amount">
                                <i class="fa-solid fa-minus change_amount_btn dec_amount_btn"></i>
                                <input type="text" maxlength="3" value="1">
                                <i class="fa-solid fa-plus change_amount_btn inc_amount_btn"></i>
                            </div>
                        </div>
                        <div class="content_cart-control-item content_cart-control-item-payment">
                            <span>250000</span>
                            <p>đ</p>
                        </div>
                        <div class="content_cart-control-item content_cart-control-item-manipulation ">
                            <span class="delete_cart_product">Xóa</span>
                        </div>
                    </div>
                </div>

                <div class="content_cart-product-item">
                    <div class="content_cart-product-item-wrapper">
                        <div class="content_cart-product_info">
                            <input type="checkbox" class="select_checkbox">
                            <a href="#" class="content_cart-product-item-wrapper-link">
                                <img class="content_cart-product-item-avatar" src="https://cf.shopee.vn/file/304c272486a52241d21fd3bbb33eff15" alt="">
                                <p class="content_cart-product-item-introduction">
                                    Tai nghe bluetooth TWS 3 âm thanh vòm, cảm biến , đổi tên , sạc không dây (bh lỗi 1 đổi 1)0000000000000000000000000000000000000
                                </p>
                            </a>
                        </div>
                        <div class="content_cart-control-item content_cart-control-item-price">
                            <span>250000</span> <p>đ</p>
                        </div>
                        <div class="content_cart-control-item">
                            <div class="content_cart-control-item-amount">
                                <i class="fa-solid fa-minus change_amount_btn dec_amount_btn"></i>
                                <input type="text" maxlength="3" value="1">
                                <i class="fa-solid fa-plus change_amount_btn inc_amount_btn"></i>
                            </div>
                        </div>
                        <div class="content_cart-control-item content_cart-control-item-payment">
                            <span>250000</span>
                            <p>đ</p>
                        </div>
                        <div class="content_cart-control-item content_cart-control-item-manipulation ">
                            <span class="delete_cart_product">Xóa</span>
                        </div>
                    </div>
                </div>

                <div class="content_cart-product-manipulation">
                    <div class="content_cart-product-manipulation-selection">
                        <input type="checkbox" class="select_checkbox">
                        <span class="select_all">Chọn tất cả (2)</span>
                        <span class="delete_cart_product">Xóa</span>
                    </div>
                    <div class="content_cart-product-manipulation-buy_product">
                        <p>Tổng thanh toán (0 sản phẩm):</p>
                        <span class="content_cart-product-manipulation-total_price">0đ</span>
                        <div class="content_cart-product-manipulation-buy_btn">Mua hàng</div>
                    </div>
                </div>
            </div>

            <div id="footer">
                <div class="footer_wrap footer_cart">
                    <div class="footer-element">
                        <div class="footer-element-customer_care">
                            <h4>CHĂM SÓC KHÁCH HÀNG</h4>
                            <ul>
                                <li>Trung tâm trợ giúp</li>
                                <li>NT Blog</li>
                                <li>NT Mail</li>
                                <li>Hướng Dẫn Mua Hàng</li>
                                <li>Hướng Dẫn Bán Hàng</li>
                                <li>Thanh Toán</li>
                                <li>NT coin</li>
                                <li>Vận Chuyển</li>
                                <li>Trả Hàng & Hoàn Tiền</li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-element">
                        <div class="footer-element-about_us">
                            <h4>VỀ NT shop</h4>
                            <ul>
                                <li>Giới Thiệu Về NT shop</li>
                                <li>Tuyển dụng</li>
                                <li>Điều khoản</li>
                                <li>Chính Sách Bảo Mật</li>
                                <li>Chính Hãng</li>
                                <li>Kênh Người Bán</li>
                                <li>Flash Sales</li>
                                <li>Liên Hệ Với Truyền Thông</li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-element">
                        <div class="footer-element-payment">
                            <h4>THANH TOÁN</h4>
                            <ul>
                                <li>
                                    <img src="https://einvoice.vn/FileUpload/ArticleMaterials/images/thanh-toan-dien-tu-4.jpg" alt="">
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-element">
                        <div class="footer-element-follow_us">
                            <h4>THEO DÕI CHÚNG TÔI TRÊN</h4>
                            <ul>
                                <li><i class="fab fa-facebook"></i>Facebook</li>
                                <li><i class="fab fa-instagram"></i> Instagram</li>
                            </ul>
                        </div>
                    </div>
                    <div class="footer-element">
                        <div class="footer-element-download_my_app">
                            <h4>TẢI ỨNG DỤNG NT shop NGAY THÔI</h4>
                            <a href="#">
                                <img src="https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg//assets/d91264e165ed6facc6178994d5afae79.png" alt="" class="footer-element-download_my_app-qrcode">
                                <div class="footer-element-download_my_app-apps">
                                    <img src="https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg//assets/39f189e19764dab688d3850742f13718.png" alt="">
                                    <img src="https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg//assets/f4f5426ce757aea491dce94201560583.png" alt="">
                                    <img src="https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg//assets/1ae215920a31f2fc75b00d4ee9ae8551.png" alt="">
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const $ = document.querySelector.bind(document);
        const $$ = document.querySelectorAll.bind(document);

        let checkBox = $$('.select_checkbox');
        let productPrice = $$('.content_cart-control-item-price span');
        let countCheckbox = 0;
        let totalPrice = 0;
        let productAmountSelect = $$('.content_cart-control-item-amount input');

        checkBox.forEach(function(element,index) {
            element.onclick = function(){
                len = checkBox.length;
                if(index == 0 || index == len -1){
                    if(element.checked){
                        selectAllCheckbox();
                    }
                    else {
                        removeAllCheckbox();
                    }
                }
                else {
                    if(element.checked){
                        countCheckbox += 1;
                        totalPrice += Number(productPrice[index-1].innerText);
                    }
                    else {
                        countCheckbox -= 1;
                        checkBox[0].checked = false;
                        checkBox[len-1].checked = false;
                        totalPrice -= Number(productPrice[index-1].innerText);
                    }
                    if(countCheckbox == len - 2){
                        selectAllCheckbox();
                    }
                }
                $('.content_cart-product-manipulation-buy_product p').innerText = `Tổng thanh toán (${countCheckbox} sản phẩm):`;
                $('.content_cart-product-manipulation-total_price').innerText = totalPrice + 'đ';
            }   
        })
        
        function selectAllCheckbox(){
            let sum = 0;
            checkBox.forEach(function(element,index){
                element.checked = true;
            })
            countCheckbox = len-2;
            totalPrice = 0;
            productPrice.forEach(function(element,index){
                totalPrice += Number(element.innerText);
            })
        }
        function removeAllCheckbox(){
            checkBox.forEach(function(element){
                element.checked = false;
            })
            totalPrice = 0;
            countCheckbox = 0;
        }

        $$('.dec_amount_btn').forEach(function(element,index){
            element.onclick = function () {
                let value = productAmountSelect[index].value;
                if(value > 1){
                    productAmountSelect[index].value = Number(value) - 1; 
                }
            }
        })
        $$('.inc_amount_btn').forEach(function(element,index){
            element.onclick = function () {
                let value = productAmountSelect[index].value;
                if(value < 1000){
                    productAmountSelect[index].value = Number(value) + 1; 
                }
            }
        })

    </script>

    <!-- link fontawesome icons -->
    <script src="https://kit.fontawesome.com/f53f2021c2.js" crossorigin="anonymous"></script>

</body>
</html>