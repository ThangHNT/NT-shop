<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage my shop</title>
    <link rel="stylesheet" href="./src/public/css/home_page.css">
    <link rel="stylesheet" href="./src/public/css/login_page.css">
    <link rel="stylesheet" href="./src/public/css/myAccount_page.css">
    <link rel="stylesheet" href="./src/public/css/product_detail_page.css">
    <link rel="stylesheet" href="./src/public/css/seller_signup_page.css">
    <link rel="stylesheet" href="./src/public/css/manage_shop_page.css">
</head>
<body>
    <div id="main_myShop">
        <div id="header_myShop">
            <div class="header_myShop-navbar">
                <a href="#"><img src="https://anhdep.tv/attachments/ac1afeb3909de0315b221710d037f01c-jpeg.5868/" alt=""></a>
                <div class="header_myShop-navbar-account">
                    <img class = "user_avatar" src="https://bloganh.net/wp-content/uploads/2021/03/chup-anh-dep-anh-sang-min.jpg" alt="">
                    <h5>hoang ngoc thang B19dcat186</h5>
                    <div class="header_myShop-navbar-account-option">
                        <a href="#">Hồ sơ shop</a>
                        <a href="#">Đăng xuất</a>
                    </div>
                </div>
            </div>
        </div>
        <div id="content_myShop">
            <div class="content_myShop-side_bar">
                <ul class="content_myShop-side_bar-delivery content_myShop-side_bar-item"> 
                    <h4>Vận chuyển</h4>
                    <li class="content_myShop-side_bar-delivery-item">Cài đặt vận chuyển</li>
                </ul>
                <ul class="content_myShop-side_bar-manage_order content_myShop-side_bar-item">
                    <h4>Quản lý đơn hàng</h4>
                    <li class="content_myShop-side_bar-manage_order-item">Tất cả</li>
                    <li class="content_myShop-side_bar-manage_order-item">Đơn thành công</li>
                    <li class="content_myShop-side_bar-manage_order-item">Đơn hủy</li>
                    <li class="content_myShop-side_bar-manage_order-item">Đơn lỗi/hoàn trả</li>
                </ul>
                <ul class="content_myShop-side_bar-manage_product content_myShop-side_bar-item"> 
                    <h4>Quản lý sản phẩm</h4>
                    <li class="content_myShop-side_bar-manage_product-item">Tất cả</li>
                    <li class="content_myShop-side_bar-manage_product-item active">Thêm sản phẩm</li>
                    <li class="content_myShop-side_bar-manage_product-item">Sản phẩm vi phạm</li>
                    <li class="content_myShop-side_bar-manage_product-item">Sản phẩm chưa bán hết</li>
                </ul>
                <ul class="content_myShop-side_bar-manage_shop content_myShop-side_bar-item"> 
                    <h4>Quản lý shop</h4>
                    <li class="content_myShop-side_bar-manage_shop-item">Hồ sơ shop</li>
                    <li class="content_myShop-side_bar-manage_shop-item">Đánh giá shop</li>
                    <li class="content_myShop-side_bar-manage_shop-item">Gỡ bỏ cửa hàng</li>
                </ul>
            </div>
            <div class="content_myShop-body">
                <div class="content_myShop-body-wrapper">
                    <!-- ================================ view tất cả sản phẩm   ============================================ -->
                    <div class="content_myShop-body-item content_myShop-body-all_product hidden">
                        <div class="content_myShop-body-item-title">
                            <h3>Tất cả sản phẩm </h3>
                        </div>
                        <div class="separate_line_vertical"></div>
                        <div class="content_myShop-body-all_product-main">
                            <div class="content_myShop-body-all_product-main-control">
                                <span class="content_myShop-body-all_product-main-name">Sản Phẩm</span>
                                <span class="content_myShop-body-all_product-main-amount">Số Lượng</span>
                                <span class="content_myShop-body-all_product-main-sold">Đã Bán</span>
                                <span class="content_myShop-body-all_product-main-action">Thao Tác</span>
                            </div>
                            <div class="content_myShop-body-all_product-main-wrapper">
                                <div class="content_myShop-body-all_product-main-item" data-id="">
                                    <div class="content_myShop-body-all_product-main-item-wrapper">
                                        <div class="content_myShop-body-all_product-main-name">
                                            <img src="https://cf.shopee.vn/file/304c272486a52241d21fd3bbb33eff15" alt="">
                                            <span>Tai Nghe Không Dây Bluetooth Cao Cấp HOCO 3 Pro Phiên Bản Định Vị - Đổi Tên, Dùng Cho IOS và Androi</span>
                                        </div>
                                        <div class="content_myShop-body-all_product-main-amount">1200</div>
                                        <div class="content_myShop-body-all_product-main-sold">0</div>
                                        <div class="content_myShop-body-all_product-main-action">
                                            <span class="content_myShop-body-all_product-main-action-edit">
                                                <a href="https://www.youtube.com/">Sửa</a>
                                            </span>
                                            <span class="content_myShop-body-all_product-main-action-delete">Xóa</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- =============================== view thêm sản phẩm mới ====================================-->
                    <div class="content_myShop-body-item content_myShop-body-product hidden">
                        <div class="content_myShop-body-item-title">
                            <h3>Thêm sản phẩm mới</h3>
                        </div>
                        <div class="separate_line_vertical"></div>
                        <div class="content_myShop-body-product-main">
                            <div class="content_myShop-body-product-main-item content_myShop-body-product-main-name">
                                <label for="">Tên sản phẩm:</label>
                                <input name="product_name" type="text" maxlength="100">
                            </div>
                            <div class="content_myShop-body-product-main-item content_myShop-body-product-main-Category">
                                <label for="">Chọn loại sản phẩm</label>
                                <ul class="content_myShop-body-product-main-Category-list">
                                    <li>Máy ảnh & máy quay phim</li>
                                    <li>Đồng hồ</li>
                                    <li>Giày dép nam</li>
                                    <li>Thiết bị điện gia dụng</li>
                                    <li>Thể thao & du lịch</li>
                                    <li>Ô tô & xe máy & xe đạp</li>
                                    <li>Balo & túi ví nam</li>
                                    <li>Đồ chơi</li>
                                    <li>Chăm sóc thú cưng</li>
                                    <li>Thời trang nam</li>
                                    <li>Điện thoại & phụ kiện</li>
                                    <li>Thiết bị điện tử</li>
                                    <li>Máy tính & laptop</li>
                                    <li>Thời trang nữ</li>
                                    <li>Mẹ & bé</li>
                                    <li>Nhà cửa & đời sống</li>
                                    <li>Sắc đẹp</li>
                                    <li>Sức khỏe</li>
                                    <li>Giày dép nữ</li>
                                    <li>Túi ví nữ</li>
                                    <li>Phụ kiện & trang sức nữ</li>
                                    <li>Bách hóa online</li>
                                    <li>Nhà sách online</li>
                                    <li>Thời trang trẻ em</li>
                                    <li>Giặt giũ & chăm sóc nhà cửa</li>
                                    <li>Voucher & dịch vụ</li>
                                </ul>
                                <div class="content_myShop-body-product-main-Category-imgs">
                                    <h4>chọn ảnh đại diện sản phẩm (url)</h4>
                                    <div class="main-Category-imgs-wrapper2">
                                        <input class="product_avatar" type="text">
                                    </div>
                                    <!-- ---------------------------------- anh dai dien -------------------- -->
                                    <div class="main-Category-imgs-wrapper hidden">
                                        <input class="product_avatar" type="file" accept="image/*">
                                        <img class="content_myShop-body-product-main-Category-imgs-avatar main-Category-imgs-item" src="" alt="">
                                        <div class="circle-blue">
                                            <i class="fa-solid fa-plus"></i>
                                        </div>
                                    </div>
                                    <h4 class="product_imgs">thêm ảnh sản phẩm (url)</h4>
                                    <div class="content_myShop-body-product-main-Category-some_imgs">
                                        <div class="main-Category-imgs-wrapper2">
                                            <input class="product_avatar" type="text">
                                        </div>
                                        <div class="main-Category-imgs-wrapper2">
                                            <input class="product_avatar" type="text">
                                        </div>
                                        <div class="main-Category-imgs-wrapper2">
                                            <input class="product_avatar" type="text">
                                        </div>
                                        <div class="main-Category-imgs-wrapper2">
                                            <input class="product_avatar" type="text">
                                        </div>
                                        <div class="main-Category-imgs-wrapper2">
                                            <input class="product_avatar" type="text">
                                        </div>
                                    </div>
                                    <div class="content_myShop-body-product-main-Category-some_imgs hidden">
                                        <div class="main-Category-imgs-wrapper">
                                            <input type="file" accept="image/*">
                                            <img class="main-Category-imgs-item" src="" alt="">
                                            <div class="circle-blue">
                                                <i class="fa-solid fa-plus"></i>
                                            </div>
                                        </div>
                                        <div class="main-Category-imgs-wrapper">
                                            <input type="file" accept="image/*">
                                            <img class="main-Category-imgs-item" src="" alt="">
                                            <div class="circle-blue">
                                                <i class="fa-solid fa-plus"></i>
                                            </div>
                                        </div>
                                        <div class="main-Category-imgs-wrapper">
                                            <input type="file" accept="image/*">
                                            <img class="main-Category-imgs-item" src="" alt="">
                                            <div class="circle-blue">
                                                <i class="fa-solid fa-plus"></i>
                                            </div>
                                        </div>
                                        <div class="main-Category-imgs-wrapper">
                                            <input type="file" accept="image/*">
                                            <img class="main-Category-imgs-item" src="" alt="">
                                            <div class="circle-blue">
                                                <i class="fa-solid fa-plus"></i>
                                            </div>
                                        </div>
                                        <div class="main-Category-imgs-wrapper">
                                            <input type="file" accept="image/*">
                                            <img class="main-Category-imgs-item" src="" alt="">
                                            <div class="circle-blue">
                                                <i class="fa-solid fa-plus"></i>
                                            </div>
                                        </div>
                                        <div class="main-Category-imgs-wrapper">
                                            <input type="file" accept="image/*">
                                            <img class="main-Category-imgs-item" src="" alt="">
                                            <div class="circle-blue">
                                                <i class="fa-solid fa-plus"></i>
                                            </div>
                                        </div>
                                        <div class="main-Category-imgs-wrapper">
                                            <input type="file" accept="image/*">
                                            <img class="main-Category-imgs-item" src="" alt="">
                                            <div class="circle-blue">
                                                <i class="fa-solid fa-plus"></i>
                                            </div>
                                        </div>
                                        <div class="main-Category-imgs-wrapper">
                                            <input type="file" accept="image/*">
                                            <img class="main-Category-imgs-item" src="" alt="">
                                            <div class="circle-blue">
                                                <i class="fa-solid fa-plus"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="content_myShop-body-product-main-introduction content_myShop-body-product-main-item">
                                <label for="">giới thiệu sản phẩm</label>
                                <input type="text", maxlength="200" name="product_introduction">
                            </div>
                            <div class="content_myShop-body-product-main-description content_myShop-body-product-main-item">
                                <label for="">Mô tả sản phẩm</label>
                                <textarea name="product_description" rows="10" maxlength="500"></textarea>
                            </div>
                            <div class="content_myShop-body-product-main-detail content_myShop-body-product-main-item">
                                <label for="">Thông tin sản phẩm</label>
                                <div class="content_myShop-body-product-main-detail-wrapper">
                                    <div class="content_myShop-body-product-main-detail-wrapper-item">
                                        <label for="">Số lượng:</label>
                                        <input class="product_detail_input-item product_detail_input-number product_detail_input-amount" maxlength="5" name="product_detail_input-item" type="text">
                                    </div>
                                    <div class="content_myShop-body-product-main-detail-wrapper-item">
                                        <label for="">Giá:</label>
                                        <input class="product_detail_input-item product_detail_input-number product_detail_input-price" maxlength="13" name="product_detail_input-item" type="text">
                                        <span class="currency">VND</span>
                                    </div>
                                    <div class="content_myShop-body-product-main-detail-wrapper-item">
                                        <label for="">Giảm giá:</label>
                                        <input class="product_detail_input-item product_detail_input-number product_detail_input-discount" maxlength="13" name="product_detail_input-item" type="text">
                                        <div class="kind_discount">
                                            <span>%</span>
                                            <div class="separate_line"></div>
                                            <span>VND</span>
                                        </div>
                                    </div>
                                    <div class="content_myShop-body-product-main-detail-wrapper-item">
                                        <label for="">Xuất xứ:</label>
                                        <input class="product_detail_input-item" maxlength="50" name="product_detail_input-item" type="text">
                                        <i class="fa-solid fa-circle-xmark"></i>
                                    </div>
                                    <div class="content_myShop-body-product-main-detail-wrapper-item">
                                        <label for="">Vận chuyển từ:</label>
                                        <input class="product_detail_input-item" maxlength="50" name="product_detail_input-item" type="text">
                                    </div>
                                </div>
                            </div>
                            <div class="content_myShop-body-store_btn">
                                <span>Lưu</span>
                            </div>
                        </div>
                    </div>

                    <!-- ================================ view hồ sơ shop ===================================================== -->
                    <div class="content_myShop-body-item content_myShop-body-profile">
                        <div class="content_myShop-body-item-title">
                            <h3>Hồ sơ shop</h3>
                        </div>
                        <div class="separate_line_vertical"></div>
                        <div class="content_myShop-body-profile-main">
                            <div class="content_myShop-body-profile-main-wrapper">
                                <div class="content_myShop-body-profile-main-avatar">
                                    <span>Ảnh đại diện shop</span>
                                    <img name="shop_avatar" src="https://meta.vn/Data/image/2022/01/13/anh-dep-thien-nhien-3.jpg" alt="">
                                    <input type="file" accept="image/*">
                                </div>
                                <div class="content_myShop-body-profile-main-info">
                                    <div class="content_myShop-body-profile-main-info-item">
                                        <span>Tên shop</span>
                                        <input type="text" class="shop_name" name="shop_name" maxlength="30">
                                    </div>
                                    <div class="content_myShop-body-profile-main-info-item input_item">
                                        <span>Số điện thoại liên hệ</span>
                                        <input type="text" class="shop_phone_number" name="shop_phone_number" maxlength="12">
                                    </div>
                                    <div class="content_myShop-body-profile-main-info-item input_item">
                                        <span>Địa chỉ</span>
                                        <input type="text" class="shop_address" name="shop_address" maxlength="80">
                                    </div>
                                    <div class="content_myShop-body-profile-main-info-item input_item">
                                        <span>Mô tả shop</span>
                                        <textarea class="shop_description" name="shop_description" placeholder="Nhập thông tin mô tả về shop tại đây" cols="50" rows="7" maxlength="500"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="store_shop_profile">
                                <span>Lưu</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="footer_myShop">

        </div>
    </div>

    <!-- ================================== modal ============================================== -->
    <div class="modal store_successfully hidden">
        <div class="modal-overlay"></div>
        <div class="modal-body-create_product modal-content">
            <div class="modal-body-create_product">
                <img style="width: 40px; height: 40px;" src="https://cachbothuocla.vn/wp-content/uploads/2019/03/tick-xanh.png"
                    alt="">
                <h4>Cập nhật thành công</h4>
            </div>
        </div>
    </div>

    <div class="modal comfirm_delete_product hidden">
        <div class="modal-overlay"></div>
        <div class="modal-body modal-content_delete_product">
            <p>Bạn chắc chắn muốn xóa sản phẩm này?</p>
            <div class="modal-body-confirm_delete_btn">
                <button class="modal-body-confirm_delete_btn-yes">Có</button>
                <button class="modal-body-confirm_delete_btn-no">Không</button>
            </div>
        </div>
    </div>


    <!-- =========================================================== Chọn loại sản phẩm ======================================== -->
    <script>
        const $ = document.querySelector.bind(document);
        const $$ = document.querySelectorAll.bind(document);

        let productCategory = $$('.content_myShop-body-product-main-Category-list li');
        productCategory.forEach((element,index) => {
            element.onclick = function(){
                removeAllSelected(index);
                element.classList.add('select_product_category');
            }    
        });
        function removeAllSelected(k){
            productCategory.forEach((element,index) => {
                if(index != k){
                    element.classList.remove('select_product_category');
                }
            });
        }

    </script>

    <!-- ======================================================= chọn ảnh sản phẩm ============================================= -->
    <!-- <script>
        let productImgsInput = $$('.main-Category-imgs-wrapper input');
        let base64String = '';

        const reader = new FileReader();
        productImgsInput.forEach((element,index) => {
            element.onchange = function(event){
                let input = event.target;
                let reader = new FileReader();
                reader.readAsDataURL(input.files[0]);
                reader.onload = function(){
                    let dataUrl = reader.result;
                    var output = $$('.main-Category-imgs-wrapper img')[index];
                    output.src = dataUrl;
                    $$('.main-Category-imgs-wrapper img')[index].style.opacity = '1';
                    base64String = reader.result.replace("data:", "").replace(/^.+,/, "");
                    $$('.circle-blue')[index].classList.add('hidden');
                }
            }
        })

    </script> -->

    <!-- ===================================================== thông tin sản phẩm =============================================== -->
    <script>
        let productInfoInput = $$('.product_detail_input-item');
        let inputNumber = $$('.product_detail_input-number');
        let unit = $$('.kind_discount span');

        unit[0].onclick = function(){
            this.classList.add('select_unit');
            unit[1].classList.remove('select_unit');
        }
        unit[1].onclick = function(){
            this.classList.add('select_unit');
            unit[0].classList.remove('select_unit');
        }

        inputNumber.forEach((element,index) => {
            element.onblur = function() {
                if(isNaN(element.value)){
                    alert('Vui lòng chỉ nhập số!');
                }
            }
        })
        
    </script>

<!-- {{!-- ================================================== ấn vào 1 mục ở side bar ========================================== --}} -->
    <script>
        let sidebarProductItems = $$('.content_myShop-side_bar-manage_product-item');

        sidebarProductItems.forEach(function(element,index){
            element.onclick = function(){
                removeAllActive();
                element.classList.add('active');
                removeAllContent();
                if(index == 0){
                    $('.content_myShop-body-all_product').classList.remove('hidden');
                }
                else if(index == 1){
                    $('.content_myShop-body-product').classList.remove('hidden');
                }
            }
        })
        function removeAllActive(){
            sidebarProductItems.forEach(function(element,index){
                element.classList.remove('active');
            })
        }
        function removeAllContent(){
            $$('.content_myShop-body-item ').forEach(function(element,index){
                element.classList.add('hidden');
            })
        }

    </script>

    <!-- =================================================== khi ấn nút lưu ======================================================= -->
    <script>
        let storeBtn = $('.content_myShop-body-store_btn span');
        let productImagesUrl = $$('.main-Category-imgs-wrapper input');
        
        function checkName(){
            if($('.content_myShop-body-product-main-name input').value.length == 0) return false;
            return true;
        }
        function checkCategory(){
            let dem = 0;
            productCategory.forEach((element,index) => {
                if(element.classList.contains('select_product_category')) {
                    dem = 1;
                }
            })
            if(dem == 0) return false;
            return true;
        }
        function checkImgs() {
            let dem = 0;
            productImagesUrl.forEach((element, index) => {
                if (element.value.length > 5) {
                    dem++;
                }
            })
            if($('.product_avatar').value.length == 0) return false;
            if (dem <= 2) return false;
            return true;
        }
        function checkIntroduce(){
            if($('.content_myShop-body-product-main-introduction input').value.length == 0) return false;
            return true;
        }
        function checkDescription(){
            if($('.content_myShop-body-product-main-item textarea').value.length == 0) return false;
            return true;
        }
        function checkProductInfo(){
            let check = true;
            $$('.product_detail_input-item').forEach((element,index) => {
                if(element.value.length == 0) check = false;
            })
            return check;
        }
        function checkUniDiscount(){
            let dem  = 0;
            unit.forEach((element,index) => {
                if(element.classList.contains('select_unit')) dem++;
            })
            if(dem == 0) return false;
            return true;
        }
        storeBtn.onclick = function(){
            // if(!checkName()) alert('Vui lòng điền tên sản phẩm!');
            // else if(!checkCategory()) alert('Bạn chưa chọn loại sản phẩm!');
            // else if(!checkImgs()) alert('Bạn cần chọn ít nhất 1 ảnh đại diện và 2 ảnh minh họa cho sản phẩm!');
            // else if(!checkIntroduce()) alert('Chưa có giới thiệu sản phẩm!')
            // else if(!checkDescription()) alert('Vui lòng điền phần mô tả sản phẩm!');
            // else if(!checkUniDiscount()) alert('Vui lòng chọn đơn vị giảm giá');
            // else if(!checkProductInfo()) alert('Vui lòng điền đầy đủ thông tin sản phẩm');
            {
                let promise = Promise.resolve();
                promise
                    .then(() => {
                        $('.store_successfully').classList.remove('hidden');
                    })
                    .then(() => {
                        setTimeout(function (){
                            $('.store_successfully').classList.add('hidden');
                        },1300);
                    })
                    .then(() => {
                        setTimeout(function (){
                            location.reload();
                        },1400);
                    })
                    .then(() => {
                        setTimeout(function (){
                            $('.content_myShop-body-all_product').classList.remove('hidden');
                            $('.content_myShop-body-product').classList.add('hidden');
                        },1500)
                    })
                    .catch(() => {console.log('co loi')})
            }
        }

    </script>

    <!-- ========================================================== sửa, Xóa sản phẩm ============================================= -->
    <script>
        let deleteProductBtn = $$('.content_myShop-body-all_product-main-action-delete');
        let listProduct = $$('.content_myShop-body-all_product-main-item');
        let editProductBtn  = $$('.content_myShop-body-all_product-main-action-edit');
        let viewEditProduct = $$('.content_myShop-body-product-main');
        let productIndex = -1;

        deleteProductBtn.forEach(function (element,index){
            element.onclick = function(){
                $('.comfirm_delete_product').classList.remove('hidden');
                productIndex = index;
            }
        })

        $('.modal-body-confirm_delete_btn-yes').onclick = function(){
            listProduct[productIndex].remove();
            $('.comfirm_delete_product').classList.add('hidden');
        }
        $('.modal-body-confirm_delete_btn-no').onclick = function(){
            $('.comfirm_delete_product').classList.add('hidden');
        }

        // editProductBtn.forEach(function(element, index){
        //     element.onclick = function(){
                
        //     }
        // })

    </script>

    <!-- ================================================== hồ sơ shop ====================================================== -->
    <script>
        $('.content_myShop-body-profile-main-avatar input').onchange = function(e){
            let input = e.target;
            let reader = new FileReader();
            reader.readAsDataURL(input.files[0]);
            reader.onload = function(){
                let dataUrl = reader.result;
                base64String = reader.result.replace("data:", "").replace(/^.+,/, "");
                $('.content_myShop-body-profile-main-avatar img').src = dataUrl;
            }
        }

        let storeShopProfileBtn = $('.store_shop_profile');
        storeShopProfileBtn.onclick = function(){
            if(checkInput() == false){
                alert('Thiếu tên shop hoặc số điện thoại hoặc địa chỉ');
            }
            else {
                let promise = Promise.resolve();
                promise
                    .then(() => {
                        $('.store_successfully').classList.remove('hidden');
                    })
                    .then(() => {
                        setTimeout(() =>{
                            $('.store_successfully').classList.add('hidden');
                        },1500);
                    })
                    .catch(() => {console.log('co loi')});
            }
        }

        function checkInput(){
            if($('.shop_name').value.length == 0) return false;
            if($('.shop_phone_number').value.length == 0) return false;
            if($('.shop_address').value.length == 0) return false;
            return true;
        }

    </script>

    <!-- link fontawesome icons -->
    <script src="https://kit.fontawesome.com/f53f2021c2.js" crossorigin="anonymous"></script>
    
</body>

</html>